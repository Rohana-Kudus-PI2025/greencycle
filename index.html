<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Gerakan edukasi sortir sampah yang dipimpin perempuanâ€”mainkan game pilah organik, kertas, daur ulang, dan sampah residu. Ajak keluarga, jaga lingkungan."
    />
    <title>GreenCycle - Home</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"
    />
    <style>
      .header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        z-index: 50;
        transition: background-color 0.25s ease, box-shadow 0.25s ease;
      }
      .header-transparent {
        background: transparent;
        color: #fff;
      }
      .header-solid {
        background: #14532d;
        color: #fff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .overlay {
        position: absolute;
        inset: 0;
        background: rgba(0, 0, 0, 0.45);
      }
      .swiper-button-next,
      .swiper-button-prev {
        color: #fff;
      }
      .swiper-pagination-bullet {
        background: #fff;
        opacity: 0.6;
      }
      .swiper-pagination-bullet-active {
        background: #10b981;
        opacity: 1;
      }
      .roll-wrap {
        position: relative;
        isolation: isolate;
        overflow: hidden;
      }
      .roll-wrap::before {
        content: "";
        position: absolute;
        inset: 0 0 auto 0;
        height: 36px;
        background: radial-gradient(
            120% 60% at 50% -40%,
            rgba(0, 0, 0, 0.18),
            transparent 60%
          ),
          linear-gradient(to bottom, rgba(0, 0, 0, 0.1), transparent);
        opacity: 0;
        transform: translateY(-20px);
        transition: opacity 0.8s ease 0.15s, transform 0.8s ease 0.15s;
        pointer-events: none;
        z-index: 1;
      }
      .roll-content {
        will-change: clip-path, transform, opacity;
        clip-path: inset(100% 0 0 0 round 28px);
        transform: translateY(12vh);
        opacity: 0;
        transition: clip-path 900ms cubic-bezier(0.22, 0.99, 0.14, 1),
          transform 900ms cubic-bezier(0.22, 0.99, 0.14, 1), opacity 600ms ease;
      }
      .roll-active .roll-content {
        clip-path: inset(0 0 0 0 round 0px);
        transform: translateY(0);
        opacity: 1;
      }
      .roll-active::before {
        opacity: 1;
        transform: translateY(0);
      }
      .cta {
        border-width: 4px;
        border-color: #14532d;
        background: #22c55e;
        box-shadow: inset 4px 4px 0 #34d399, inset -4px -4px 0 #16a34a,
          0 6px 0 #14532d, 0 10px 0 #00000022;
      }
      canvas {
        display: block;
      }
    </style>
  </head>
  <body class="text-slate-800">
    <header id="siteHeader" class="header header-transparent">
      <div
        class="max-w-6xl mx-auto h-16 px-4 flex items-center justify-between"
      >
        <div class="font-bold">GreenCycle</div>
        <nav class="hidden md:block">
          <ul class="flex gap-6">
            <li>
              <a href="index.html" class="hover:text-emerald-600">Home</a>
            </li>
            <li>
              <a href="overview.html" class="hover:text-emerald-600"
                >Overview</a
              >
            </li>
            <li><a href="game.html" class="hover:text-emerald-600">Game</a></li>
            <li>
              <a href="tips-and-trick.html" class="hover:text-emerald-600"
                >Tips and Trick</a
              >
            </li>
            <li>
              <a href="contact.html" class="hover:text-emerald-600"
                >Contact Us</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>
    <div class="relative h-[200svh]" id="pin-stage">
      <section class="sticky top-0 h-[100svh] z-[1]">
        <div class="swiper h-full">
          <div class="swiper-wrapper">
            <div class="swiper-slide relative">
              <img
                src="assets/images/slider1.jpg"
                class="absolute inset-0 w-full h-full object-cover"
              />
              <div class="overlay"></div>
              <div
                class="relative z-10 max-w-6xl mx-auto h-full px-4 flex items-center"
              >
                <h1 class="text-4xl md:text-6xl font-extrabold text-white">
                  Perubahan besar dimulai dari langkah kecil.
                </h1>
              </div>
            </div>
            <div class="swiper-slide relative">
              <img
                src="assets/images/slider2.jpg"
                class="absolute inset-0 w-full h-full object-cover"
              />
              <div class="overlay"></div>
              <div
                class="relative z-10 max-w-6xl mx-auto h-full px-4 flex items-center"
              >
                <h1 class="text-4xl md:text-6xl font-extrabold text-white">
                  Perempuan berdaya, lingkungan terjaga.
                </h1>
              </div>
            </div>
            <div class="swiper-slide relative">
              <img
                src="assets/images/slider3.jpg"
                class="absolute inset-0 w-full h-full object-cover"
              />
              <div class="overlay"></div>
              <div
                class="relative z-10 max-w-6xl mx-auto h-full px-4 flex items-center"
              >
                <h1 class="text-4xl md:text-6xl font-extrabold text-white">
                  Rumah tangga sadar, masa depan terpelihara.
                </h1>
              </div>
            </div>
          </div>
          <div class="swiper-pagination !bottom-6"></div>
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
        </div>
      </section>
    </div>

    <section
      id="heroFrame"
      class="relative -mt-[100svh] z-[2] h-[100svh] bg-white text-slate-800"
    >
      <div id="rollBox" class="roll-wrap h-full">
        <div class="roll-content h-full">
          <div
            class="relative z-10 max-w-6xl mx-auto px-4 h-full grid md:grid-cols-2 items-center gap-6 md:gap-10"
          >
            <div class="min-w-0">
              <h2
                class="text-2xl sm:text-3xl md:text-5xl font-extrabold leading-tight text-slate-900"
              >
                GREENCYCLE
              </h2>
              <p class="mt-3 sm:mt-4 text-slate-600 text-base sm:text-lg">
                Gerakan edukasi lewat <strong>game sortir sampah</strong> untuk
                keluarga di Indonesia, dengan perempuan sebagai motor perubahan.
                Main sebentar, pahami kategori organik, kertas, daur ulang, dan
                sampah residu, lalu praktikkan di rumah dan lingkungan sekitar.
              </p>
              <a
                href="#how"
                class="inline-block mt-5 sm:mt-6 px-5 py-3 text-white cta"
                >Mulai main</a
              >
            </div>
            <div
              id="stageSlot"
              class="relative min-h-0 h-[min(40svh,360px)] md:h-[60%] lg:h-[65%] rounded-xl overflow-hidden border border-slate-200"
            >
              <canvas
                id="frameBG"
                class="absolute inset-0 w-full h-full"
              ></canvas>
              <canvas
                id="frameFG"
                class="absolute inset-0 w-full h-full pointer-events-none"
              ></canvas>
            </div>
          </div>
        </div>
      </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script>
      const hero = new Swiper(".swiper", {
        loop: true,
        autoplay: { delay: 4500 },
        speed: 700,
        pagination: { el: ".swiper-pagination", clickable: true },
        navigation: {
          nextEl: ".swiper-button-next",
          prevEl: ".swiper-button-prev",
        },
      });

      const header = document.getElementById("siteHeader");
      const section2 = document.getElementById("heroFrame");
      const rollBox = document.getElementById("rollBox");
      const io = new IntersectionObserver(
        (entries) => {
          entries.forEach((entry) => {
            if (entry.isIntersecting) {
              header.classList.remove("header-transparent");
              header.classList.add("header-solid");
              rollBox.classList.add("roll-active");
            } else {
              header.classList.add("header-transparent");
              header.classList.remove("header-solid");
              rollBox.classList.remove("roll-active");
            }
          });
        },
        { threshold: 0.1 }
      );
      io.observe(section2);

      let ticking = false;
      window.addEventListener(
        "scroll",
        () => {
          if (ticking) return;
          ticking = true;
          requestAnimationFrame(() => {
            const stage = document
              .getElementById("pin-stage")
              .getBoundingClientRect();
            if (
              stage.bottom < window.innerHeight * 0.9 &&
              stage.bottom > window.innerHeight * 0.1
            ) {
              document
                .getElementById("heroFrame")
                .scrollIntoView({ behavior: "smooth", block: "start" });
            }
            ticking = false;
          });
        },
        { passive: true }
      );

      // canvas section 2
      const frame = document.getElementById("heroFrame");
      const stage = document.getElementById("stageSlot");
      const bgCanvas = document.getElementById("frameBG");
      const fgCanvas = document.getElementById("frameFG");
      const bg = bgCanvas.getContext("2d");
      const fg = fgCanvas.getContext("2d");
      let FW = 0,
        FH = 0,
        SW = 0,
        SH = 0,
        SOX = 0,
        SOY = 0,
        t = 0;
      let beamY = 80;
      function fitCanvas(c, ctx, w, h) {
        const d = window.devicePixelRatio || 1;
        c.width = Math.floor(w * d);
        c.height = Math.floor(h * d);
        ctx.setTransform(d, 0, 0, d, 0, 0);
      }
      function rr(ctx, x, y, w, h, r) {
        ctx.beginPath();
        ctx.moveTo(x + r, y);
        ctx.arcTo(x + w, y, x + w, y + h, r);
        ctx.arcTo(x + w, y + h, x, y + h, r);
        ctx.arcTo(x, y + h, x, y, r);
        ctx.arcTo(x, y, x + w, y, r);
        ctx.closePath();
      }
      function measure() {
        const fr = frame.getBoundingClientRect(),
          sr = stage.getBoundingClientRect();
        FW = fr.width;
        FH = fr.height;
        fitCanvas(bgCanvas, bg, FW, FH);
        fitCanvas(fgCanvas, fg, FW, FH);
        SW = sr.width;
        SH = sr.height;
        SOX = sr.left - fr.left;
        SOY = sr.top - fr.top;
        beamY = Math.max(48, SH * 0.16);
      }
      new ResizeObserver(measure).observe(frame);
      new ResizeObserver(measure).observe(stage);
      window.addEventListener("resize", measure);
      measure();
      function drawBG() {
        bg.clearRect(0, 0, FW, FH);
        const x0 = SOX,
          y0 = SOY;
        bg.fillStyle = "#eef2ff";
        bg.fillRect(0, 0, FW, FH);
        bg.fillStyle = "#9aa0a6";
        bg.fillRect(x0, y0 + beamY - 8, SW, 8);
        bg.fillStyle = "#b4bac2";
        bg.fillRect(x0, y0 + beamY - 14, SW, 6);
      }
      function drawFG() {
        fg.clearRect(0, 0, FW, FH);
        t++;
        const x0 = SOX,
          y0 = SOY;
        const minX = x0 + 24,
          maxX = x0 + SW - 24;
        const phase = (t * 0.003) % 2;
        const ratio = phase < 1 ? phase : 2 - phase;
        const trolleyX = minX + ratio * (maxX - minX);
        const hookBaseY = y0 + beamY + 6;
        const swing = Math.sin(t * 0.08) * 12;
        const hookX = trolleyX + swing,
          hookY = hookBaseY + 140;
        fg.strokeStyle = "#94a3b8";
        fg.lineWidth = 3;
        fg.beginPath();
        fg.moveTo(trolleyX, hookBaseY);
        fg.lineTo(hookX, hookY - 18);
        fg.stroke();
        const bw = 26,
          bh = 22,
          bx = hookX - bw / 2,
          by = hookY - 22;
        fg.fillStyle = "#6b7280";
        rr(fg, bx, by, bw, bh, 6);
        fg.fill();
        fg.strokeStyle = "#374151";
        fg.lineWidth = 5;
        fg.beginPath();
        fg.moveTo(hookX, hookY - 4);
        fg.lineTo(hookX, hookY + 8);
        fg.stroke();
      }
      (function loop() {
        drawBG();
        drawFG();
        requestAnimationFrame(loop);
      })();
    </script>
  </body>
</html>
